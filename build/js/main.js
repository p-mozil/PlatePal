const ingredientsField=document.querySelector(".ingredientsField"),findButton=document.querySelector(".findButton"),result=document.querySelector(".result"),loading=document.querySelector(".loadingAnimation"),main=document.querySelector(".main"),error_message=document.createElement("p");async function getDishes(e){return await(await fetch("https://api.openai.com/v1/completions",{body:JSON.stringify({model:"text-davinci-002",prompt:e,temperature:.5,max_tokens:200}),method:"POST",headers:{"content-type":"application/json",Authorization:"Bearer  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"}})).json()}function render(e){console.log("render",e),loading.style.display="none",e.map(e=>{var t=document.createElement("p");findButton.value="Else",t.textContent=e,result.appendChild(t)})}function showError(e){var t=document.createElement("p");t.className="error_message",t.textContent=e,result.append(t),loading.style.display="none"}findButton.addEventListener("click",function(){let e=ingredientsField.value,r="Dish recipe using only "+e;result.textContent="",(n=async()=>{try{if(e){loading.style.display="block";var t=await getDishes(r);console.log(t);let e=t.choices[0].text.split(/\n/);render(e=e.filter((e,t,n)=>","!=e.charAt(0)&&""!=e&&n[0].charAt(0).toLowerCase()!==e.charAt(0)))}else showError("Please provide at least one ingredient.")}catch(e){showError("Error fetching dishes. Please try again later.")}})()});